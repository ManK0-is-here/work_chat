{% extends "base_groups.html" %}

{% block title %}{{ group.name }}{% endblock %}

{% block content %}
    <div class="group-card">
        <div class="group-header">
            <div class="group-icon-main">
                {% if group.icon %}
                    <img src="{{ group.icon.url }}" alt="–ò–∫–æ–Ω–∫–∞ –≥—Ä—É–ø–ø—ã" class="group-icon">
                {% else %}
                    <img src="{{ group.icon.url }}" alt="–ò–∫–æ–Ω–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" class="group-icon">
                {% endif %}
            </div>
            <div class="group-title">
                <h2 >{{ group.name }}</h2>
            </div>

            <div class="pos-l">
                <button class="menu-btn" onclick="toggleMenu()"><img src="/static/image/menu.png" alt="" width="30px"  height="30px"></button>
                
                <div id="menu-panel" class="menu-panel">
                    {% if user in group.members.all %}
                        {% if user == group.creator %}
                            <a href="{% url 'groups:group_edit' group.pk %}" class="btn-action btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <a href="{% url 'groups:group_delete' group.pk %}" class="btn-action btn-delete">‚ùå –£–¥–∞–ª–∏—Ç—å</a>
                        {% else %}
                            <a href="{% url 'groups:group_leave' group.pk %}" class="btn-action btn-leave">üö™ –í—ã–π—Ç–∏ –∏–∑ –≥—Ä—É–ø–ø—ã</a>
                        {% endif %}
                    {% else %}
                        <a href="{% url 'groups:group_join' group.pk %}" class="btn-action btn-join">–í–æ–π—Ç–∏ –≤ –≥—Ä—É–ø–ø—É</a>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="group-description">
            <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
            <p>{{ group.description|default:"–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç" }}</p>
        </div>

        <div class="group-members">
            <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
            <ul>
                {% for member in group.members.all %}
                    <li>{{ member.username }}</li>
                {% empty %}
                    <li>–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç</li>
                {% endfor %}
            </ul>
        </div>

        <div class="chatbutton">
            {% if user in group.members.all %}
                <a href="{% url 'groups:group_chat' group.pk %}" class="btn-chat">–ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç</a>
            {% endif %}   
        </div>     
    </div>
{% endblock %}

